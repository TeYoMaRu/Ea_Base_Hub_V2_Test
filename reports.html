<!DOCTYPE html>
<html lang="th">
<head>
    <base target="_top">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EABaseHub - ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô</title>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
</head>
<body>
    <div class="container">
        <!-- Sidebar -->
        <?!= include('Sidebar'); ?>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Header -->
            <header class="header">
                <div class="page-title">
                    <h1>üìã ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°</h1>
                    <p>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÅ‡∏•‡∏∞‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</p>
                </div>
                <div class="header-right">
                    <button class="btn-export" onclick="exportReports()">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"/></svg>
                        ‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å
                    </button>
                    <button class="btn-add" onclick="openAddReportModal()">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/></svg>
                        ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô
                    </button>
                    <div class="user-info" onclick="toggleUserMenu()">
                        <div class="user-avatar" id="userAvatar">?</div>
                        <span id="userEmail">Loading...</span>
                        <div class="user-menu" id="userMenu">
                            <div class="user-menu-item" onclick="logout()">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</div>
                        </div>
                    </div>
                </div>
            </header>

            <!-- Filters Section -->
            <div class="filters-section">
                <div class="filter-group">
                    <label>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô</label>
                    <input type="date" id="filterStartDate" onchange="applyFilters()">
                </div>
                <div class="filter-group">
                    <label>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î</label>
                    <input type="date" id="filterEndDate" onchange="applyFilters()">
                </div>
                <div class="filter-group" id="salesFilterGroup">
                    <label>‡πÄ‡∏ã‡∏•‡∏•‡πå</label>
                    <select id="filterSales" onchange="applyFilters()">
                        <option value="">‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</label>
                    <select id="filterStatus" onchange="applyFilters()">
                        <option value="">‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</option>
                        <option value="‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£">‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£</option>
                        <option value="‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£</option>
                        <option value="‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à">‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à</option>
                        <option value="‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</option>
                    </select>
                </div>
                <button class="btn-clear-filter" onclick="clearFilters()">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
                    ‡∏•‡πâ‡∏≤‡∏á
                </button>
            </div>

            <!-- Stats Summary -->
            <div class="stats-summary">
                <div class="summary-card">
                    <div class="summary-icon blue">üìä</div>
                    <div class="summary-info">
                        <h3 id="totalReportsCount">0</h3>
                        <p>‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</p>
                    </div>
                </div>
                <div class="summary-card">
                    <div class="summary-icon orange">‚è≥</div>
                    <div class="summary-info">
                        <h3 id="pendingCount">0</h3>
                        <p>‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£</p>
                    </div>
                </div>
                <div class="summary-card">
                    <div class="summary-icon green">‚úÖ</div>
                    <div class="summary-info">
                        <h3 id="completedCount">0</h3>
                        <p>‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à</p>
                    </div>
                </div>
                <div class="summary-card">
                    <div class="summary-icon purple">üí∞</div>
                    <div class="summary-info">
                        <h3 id="totalSalesAmount">‡∏ø0</h3>
                        <p>‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢‡∏£‡∏ß‡∏°</p>
                    </div>
                </div>
            </div>

            <!-- Reports Table -->
            <div class="table-container">
                <div class="table-header">
                    <div class="table-search">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="#999"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/></svg>
                        <input type="text" id="tableSearch" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤, ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤..." onkeyup="searchTable()">
                    </div>
                    <div class="table-actions">
                        <span id="selectedCount" style="display:none;">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å 0 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</span>
                        <button class="btn-bulk-action" id="bulkActionBtn" style="display:none;" onclick="showBulkActions()">
                            ‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£ ‚ñº
                        </button>
                    </div>
                </div>

                <table class="reports-table">
                    <thead>
                        <tr>
                            <th class="checkbox-col">
                                <input type="checkbox" id="selectAll" onchange="toggleSelectAll()">
                            </th>
                            <th>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</th>
                            <th>‡πÄ‡∏ã‡∏•‡∏•‡πå</th>
                            <th>‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤</th>
                            <th>‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</th>
                            <th>‡∏¢‡∏≠‡∏î</th>
                            <th>‡πÅ‡∏´‡∏•‡πà‡∏á‡∏ó‡∏µ‡πà‡∏°‡∏≤</th>
                            <th>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</th>
                            <th>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th>
                        </tr>
                    </thead>
                    <tbody id="reportsTableBody">
                        <tr class="empty-row">
                            <td colspan="9">
                                <div class="empty-state">
                                    <svg width="64" height="64" viewBox="0 0 24 24" fill="#ccc"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"/></svg>
                                    <p>‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...</p>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>

                <div class="table-footer">
                    <div class="pagination-info">
                        ‡πÅ‡∏™‡∏î‡∏á <span id="showingFrom">0</span> - <span id="showingTo">0</span> ‡∏à‡∏≤‡∏Å <span id="totalItems">0</span> ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£
                    </div>
                    <div class="pagination" id="pagination">
                        <!-- Pagination will be added by JavaScript -->
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Add/Edit Report Modal -->
    <div class="modal-overlay" id="reportModal">
        <div class="modal">
            <div class="modal-header">
                <h3 id="modalTitle">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°</h3>
                <button class="modal-close" onclick="closeReportModal()">&times;</button>
            </div>
            <form id="reportForm" onsubmit="submitReport(event)">
                <input type="hidden" id="editRowIndex">
                
                <!-- ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà -->
                <div class="form-group">
                    <label>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏° *</label>
                    <input type="date" id="reportDate" required>
                </div>
                
                <!-- ‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤ -->
                <div class="form-group">
                    <label>‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤ *</label>
                    <select id="reportShop" required>
                        <option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤ --</option>
                    </select>
                </div>
                
                <!-- ‡∏´‡∏°‡∏ß‡∏î‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ + ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Cascading) -->
                <div class="form-row">
                    <div class="form-group">
                        <label>‡∏´‡∏°‡∏ß‡∏î‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ *</label>
                        <select id="reportCategory" required onchange="onCategoryChange()">
                            <option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏°‡∏ß‡∏î --</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ *</label>
                        <select id="reportProduct" required disabled>
                            <option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏°‡∏ß‡∏î‡∏Å‡πà‡∏≠‡∏ô --</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label>‡πÅ‡∏´‡∏•‡πà‡∏á‡∏ó‡∏µ‡πà‡∏°‡∏≤</label>
                        <select id="reportSource">
                            <option value="Walk-in">Walk-in (‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏ö)</option>
                            <option value="LINE">LINE</option>
                            <option value="Facebook">Facebook</option>
                            <option value="‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå">‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå</option>
                            <option value="‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥">‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥</option>
                            <option value="‡∏≠‡∏∑‡πà‡∏ô‡πÜ">‡∏≠‡∏∑‡πà‡∏ô‡πÜ</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</label>
                        <select id="reportStatus">
                            <option value="‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°‡πÅ‡∏•‡πâ‡∏ß">‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°‡πÅ‡∏•‡πâ‡∏ß</option>
                            <option value="‡∏°‡∏µ‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå">‡∏°‡∏µ‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå</option>
                            <option value="‡∏£‡∏≠‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°">‡∏£‡∏≠‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°</option>
                            <option value="‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å">‚ùå ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label>‡∏¢‡∏≠‡∏î‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠ (‡∏ö‡∏≤‡∏ó) <small style="color:#888">- ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ</small></label>
                        <input type="number" id="reportAmount" placeholder="0 (‡πÑ‡∏°‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô)" min="0">
                    </div>
                    <div class="form-group">
                        <label>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°</label>
                        <input type="date" id="reportFollowUp">
                    </div>
                </div>
                
                <div class="form-group">
                    <label>üìù ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏ / ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°</label>
                    <textarea id="reportNote" placeholder="‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î ‡πÄ‡∏ä‡πà‡∏ô ‡∏û‡∏π‡∏î‡∏Ñ‡∏∏‡∏¢‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏≠‡∏∞‡πÑ‡∏£, ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏™‡∏ô‡πÉ‡∏à‡∏≠‡∏∞‡πÑ‡∏£..." rows="4"></textarea>
                </div>
                
                <div class="modal-actions">
                    <button type="button" class="btn-secondary" onclick="closeReportModal()">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                    <button type="submit" class="btn-primary">üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Bulk Actions Menu -->
    <div class="bulk-menu" id="bulkMenu">
        <div class="bulk-menu-item" onclick="bulkUpdateStatus('‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£')">‚è≥ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£</div>
        <div class="bulk-menu-item" onclick="bulkUpdateStatus('‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à')">‚úÖ ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à</div>
        <div class="bulk-menu-item" onclick="bulkUpdateStatus('‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å')">‚ùå ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</div>
        <div class="bulk-menu-divider"></div>
        <div class="bulk-menu-item danger" onclick="bulkDelete()">üóëÔ∏è ‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å</div>
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-spinner"></div>
        <p>‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...</p>
    </div>

    <?!= include('ReportsScript'); ?>
</body>
</html>



 <h1>‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á</h1>

  <table border="1" cellpadding="8">
    <thead>
      <tr>
        <th>‡∏•‡∏≥‡∏î‡∏±‡∏ö</th>
        <th>‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà</th>
        <th>‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢</th>
      </tr>
    </thead>
    <tbody id="reportBody"></tbody>
  </table>

  <p id="total"></p>
  <p id="summary"></p>

  <script src="report.js"></script>