<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <title>Admin | ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤</title>

  <!-- Supabase -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

  <!-- Font & Icons -->
  <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;600&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet">

  <!-- CSS -->
  <link rel="stylesheet" href="css/admin-base.css">
  <link rel="stylesheet" href="css/admin-shops.css">
</head>

<body>

<header class="topbar">
  <div class="brand">üåø EABaseHub | ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤</div>
  <button onclick="logout()" class="btn">Logout</button>
</header>

<main class="container">

  <!-- Header -->
  <div class="admin-header">
    <h2>
      <span class="material-symbols-outlined">store</span>
      ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤
    </h2>

    <button onclick="goHome()" class="btn-back">
      <span class="material-symbols-outlined">arrow_back</span>
      ‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å
    </button>
  </div>

  <!-- Tabs -->
  <div class="admin-tabs">

    <a class="admin-tab" href="admintor.html">
      <span class="material-symbols-outlined">people</span>
      ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô
    </a>

    <a class="admin-tab" href="admin-sales.html">
      <span class="material-symbols-outlined">badge</span>
      Sales
    </a>

    <a class="admin-tab active" href="admin-shops.html">
      <span class="material-symbols-outlined">store</span>
      ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤
    </a>

  </div>

  <!-- Refresh -->
  <button class="btn-refresh" onclick="loadSalesForPermissions()">
    <span class="material-symbols-outlined">refresh</span>
    ‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä
  </button>

  <!-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Sales -->
  <div class="form-group">
    <label>
      <span class="material-symbols-outlined label-icon">badge</span>
      ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Sales
    </label>

    <select id="selectSaleForPerm" onchange="loadSaleShops()">
      <option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Sales --</option>
    </select>
  </div>

  <!-- ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤ -->
  <div id="permissionsContainer">
    <div class="empty-state">
      <span class="material-symbols-outlined">store</span>
      <div class="empty-state-text">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Sales ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤</div>
    </div>
  </div>


  <!-- ===============================
     SHOP MODAL
================================ -->
<div id="shopModal" class="modal">
  <div class="modal-content">

    <div class="modal-header">
      <h3 id="modalTitle">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤</h3>
      <span class="close-btn" onclick="closeModal()">&times;</span>
    </div>

    <div class="modal-body">
      <input type="hidden" id="shopId">

      <div class="form-group">
        <label>‡∏ä‡∏∑‡πà‡∏≠‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤</label>
        <input type="text" id="shopName" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏£‡πâ‡∏≤‡∏ô">
      </div>

      <div class="form-group">
        <label>‡∏£‡∏´‡∏±‡∏™‡∏£‡πâ‡∏≤‡∏ô</label>
        <input type="text" id="shopCode" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏£‡πâ‡∏≤‡∏ô (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)">
      </div>
    </div>

    <div class="modal-footer">
      <button class="btn-cancel" onclick="closeModal()">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
      <button class="btn-save" onclick="saveShop()">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
    </div>

  </div>
</div>

<!-- ===============================
     TRANSFER SHOP MODAL
================================ -->
<div id="transferModal" class="modal">
  <div class="modal-content">

    <div class="modal-header">
      <h3>‡πÇ‡∏≠‡∏ô‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤‡πÑ‡∏õ‡∏¢‡∏±‡∏á Sales ‡∏≠‡∏∑‡πà‡∏ô</h3>
      <span class="close-btn" onclick="closeTransferModal()">&times;</span>
    </div>

    <div class="modal-body">
      <input type="hidden" id="transferShopId">

      <div class="form-group">
        <label>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Sales ‡πÉ‡∏´‡∏°‡πà</label>
        <select id="transferSaleSelect">
          <option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Sales --</option>
        </select>
      </div>
    </div>

    <div class="modal-footer">
      <button class="btn-cancel" onclick="closeTransferModal()">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
      <button class="btn-save" onclick="confirmTransfer()">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡πÇ‡∏≠‡∏ô</button>
    </div>

  </div>
</div>

</main>

<!-- ===============================
     JAVASCRIPT
================================ -->
<script src="js/core/supabaseClient.js"></script>
<script src="js/core/auth.js"></script>
<script src="js/admin-shops.js"></script>



</body>
</html>
